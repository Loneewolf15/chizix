<ion-header translucent={true} color="dark">
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="profiles/security"></ion-back-button>

    </ion-buttons>
    <ion-title mode="ios">Change Pin</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="dark" >
  <ion-button expand="block" color="secondary" class="ion-padding">
    <ion-text>Set A New Pin</ion-text>
  </ion-button> 

    <ion-card  class="ion-no-margin" color="dark">
  <ion-card-content color="dark">
  
  
  
    <ion-list lines="full">
      <div *ngIf="!showOtpForm" color="dark">
      
<form [formGroup]="form" >
 

  <ion-item color="dark" [class.valid]="form.get('pin').valid" [class.invalid]="form.get('pin').invalid">

    <ion-input label="Current Pin:" type="password" label-placement="floating" fill="outline" formControlName="pin" placeholder="Default pin from email"></ion-input>
  <br>
    <div class="validation-message" *ngIf="form.get('pin').invalid && (form.get('pin').dirty || form.get('pin').touched)">
     Entry not valid.
    </div>
  </ion-item>



  

  <ion-item color="dark" [class.valid]="form.get('pin2').valid" [class.invalid]="form.get('pin2').invalid">
    <ion-input label="New Pin:" type="password" label-placement="floating" fill="outline" formControlName="pin2" ></ion-input>
 
    <div class="validation-message" *ngIf="form.get('pin2').invalid && (form.get('pin2').dirty || form.get('pin2').touched)">
      Entry not valid.
    </div>
  </ion-item>

  <ion-item color="dark" [class.valid]="form.get('confirm_pin2').valid" [class.invalid]="form.get('confirm_pin2').invalid">
    <ion-input label="Confirm Pin:"  type="password" label-placement="floating" fill="outline" formControlName="confirm_pin2" ></ion-input>
 
    <div class="validation-message" *ngIf="form.get('confirm_pin2').invalid && (form.get('confirm_pin2').dirty || form.get('confirm_pin2').touched)">
      Entries do not match.
    </div>
  </ion-item>
 

</form>





<ion-loading
[message]="'Please wait...'"
[duration]="10000"
[showBackdrop]="true"
[translucent]="true"

[spinner]="'crescent'"

></ion-loading>

  
<div class="purr" >
  <br><br>
    <ion-button type="submit"
     class="ion-margin"
      size="large" 
      expand="block" 
      shape="round" 
      color="warning"
      (click)="changeP()" [disabled]="form.invalid">
      <ion-text>Save</ion-text>
    </ion-button>
     <br>
  </div>
 
  
  </div>




    
    </ion-list>
  
  </ion-card-content>

  </ion-card>
  </ion-content> 
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3344],{3344:(b,p,a)=>{a.r(p),a.d(p,{ScanPage:()=>C});var _=a(5861),d=a(6814),c=a(95),i=a(8606),f=a(4716),n=a(6689),u=a(1517),P=a(1725),m=a(9426);function O(r,h){if(1&r){const e=n.EpF();n.TgZ(0,"label",12)(1,"input",13),n.NdJ("change",function(o){n.CHM(e);const l=n.oxw();return n.KtG(l.onFileChange(o))}),n.qZA(),n._UZ(2,"ion-icon",14),n.TgZ(3,"span",15),n._uU(4,"Select File"),n.qZA()()}}function M(r,h){if(1&r&&(n.TgZ(0,"div",16)(1,"div",17),n._UZ(2,"img",18),n.qZA(),n.TgZ(3,"div",19)(4,"p",20),n._uU(5),n.qZA(),n.TgZ(6,"p",21),n._uU(7),n.qZA()()()),2&r){const e=n.oxw();n.xp6(2),n.Q6J("src",e.selectedFileDataUrl,n.LSH),n.xp6(3),n.Oqu(e.selectedFile.name),n.xp6(2),n.Oqu(e.formatFileSize(e.selectedFile.size))}}let C=(()=>{class r{constructor(e,t,o,l,s){this.loadingCtrl=e,this.toastCtrl=t,this.authService=o,this.router=l,this.igs=s,this.selectedFile=null,this.selectedFileDataUrl=null}ngOnInit(){}onFileChange(e){const t=e.target.files;t&&t.length>0&&(this.selectedFile=t[0],this.readFile()),this.nin=t}readFile(){const e=new FileReader;e.onload=t=>{this.selectedFileDataUrl=t.target?.result},e.readAsDataURL(this.selectedFile)}formatFileSize(e){const t=e/1024;return t<1024?t.toFixed(2)+" KB":(t/1024).toFixed(2)+" MB"}presentToast(e){var t=this;return(0,_.Z)(function*(){(yield t.toastCtrl.create({message:e,duration:3e3})).present()})()}upload(e){const t=new FormData;console.log(this.nin);const o=this.dataUrltoBlob(this.selectedFileDataUrl);t.append("nin",o,this.selectedFile?.name),console.log(t),this.uploadData(t)}uploadData(e){var t=this;return(0,_.Z)(function*(){const o=yield t.loadingCtrl.create({message:"Uploading ID...Please wait..."});yield o.present(),t.authService.validaten(e).pipe((0,f.x)(()=>{o.dismiss()})).subscribe(l=>{console.log(e+"in sub"),console.log(e+"Divine"),console.log(l),"nin successfully uploaded"===l.message?(t.igs.setscanStatus(!0),t.presentToast("ID upload complete."),t.router.navigateByUrl("/register/veri")):t.presentToast("ID upload failed.")},l=>{console.log(l),t.presentToast("An error occurred during the upload.")})})()}dataUrltoBlob(e){const t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],l=new ArrayBuffer(t.length),s=new Uint8Array(l);for(let g=0;g<t.length;g++)s[g]=t.charCodeAt(g);return new Blob([l],{type:o})}static#n=this.\u0275fac=function(t){return new(t||r)(n.Y36(i.HT),n.Y36(i.yF),n.Y36(u.e),n.Y36(P.F0),n.Y36(m.z))};static#t=this.\u0275cmp=n.Xpm({type:r,selectors:[["app-scan"]],standalone:!0,features:[n.jDz],decls:25,vars:2,consts:[["slot","start"],["defaultHref","accounts/verification"],[1,"ion-padding"],[1,"file-upload-form"],["class","file-upload",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"ion-padding","file-requirements-title"],[1,"file-requirements"],["lines","none",1,"bullet-point"],["name","ellipse","slot","start"],[1,"ion-text-justify"],["shape","block","color","warning",1,"submit-button",3,"click"],[1,"file-upload"],["type","file","hidden","",3,"change"],["name","cloud-upload-outline",1,"upload-icon"],[1,"file-label"],[1,"file-preview"],[1,"image-preview"],["alt","Selected Image",3,"src"],[1,"file-details"],[1,"file-name"],[1,"file-size"]],template:function(t,o){1&t&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n._UZ(3,"ion-back-button",1),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"Scan ID"),n.qZA()()(),n.TgZ(6,"ion-content",2)(7,"form",3),n.YNc(8,O,5,0,"label",4),n.YNc(9,M,8,3,"div",5),n.TgZ(10,"h5",6),n._uU(11,"Please ensure that the file matches the following:"),n.qZA(),n.TgZ(12,"ul",7)(13,"li")(14,"ion-item",8),n._UZ(15,"ion-icon",9),n.TgZ(16,"ion-text",10),n._uU(17,"The image must be clear and not blurred"),n.qZA()()(),n.TgZ(18,"li")(19,"ion-item",8),n._UZ(20,"ion-icon",9),n.TgZ(21,"ion-text"),n._uU(22,"The information on the ID can be read easily"),n.qZA()()()(),n.TgZ(23,"ion-button",11),n.NdJ("click",function(s){return o.upload(s)}),n._uU(24,"Submit"),n.qZA()()()),2&t&&(n.xp6(8),n.Q6J("ngIf",!o.selectedFile),n.xp6(1),n.Q6J("ngIf",o.selectedFile))},dependencies:[d.ez,d.O5,c.u5,c._Y,c.JL,c.F,c.UX,i.Pc,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Ie,i.yW,i.wd,i.sr,i.oU],styles:["ion-content[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 22px;--background-checked: #7E219E}ion-content[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #7E219E}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:transparent;font-weight:70;font-size:15px}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:B Proportional Bold;font-style:32px;font-weight:bolder}ion-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:2px}ion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:B Proportional Bold;font-style:normal;font-weight:bolder}ion-content[_ngcontent-%COMP%]   .bullet-point[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:8px;color:#000}ion-content[_ngcontent-%COMP%]   .email-link[_ngcontent-%COMP%]{color:#7e219e}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Avenir Next;font-style:normal;font-weight:300;font-size:16px}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:2rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{border-radius:50%;border:1px solid var(--ion-color-tertiary);height:4.5rem;width:4.5rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:transparent;font-weight:500;font-size:16px;margin-bottom:1px;margin-top:.6rem}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--border-style: dashed;--border-color: var(--ion-color-tertiary);--padding-start: 0;--padding-end: 0}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{display:transparent;font-weight:500;font-size:16px;margin-bottom:1px;margin-top:.6rem}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{margin-right:-.6rem}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:15%;margin-right:25%;margin-left:25%;--border-radius: 10px}ion-content[_ngcontent-%COMP%]   .signout[_ngcontent-%COMP%]{color:var(--ion-color-danger)}ion-content[_ngcontent-%COMP%]   .signout[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{padding-bottom:2px}ion-content[_ngcontent-%COMP%]   .ion[_ngcontent-%COMP%]{padding-top:3%;padding-bottom:1%}ion-content[_ngcontent-%COMP%]   ion-input[type=file][_ngcontent-%COMP%]{color:#f0f8ff;background-color:#fff;border:2px solid #fff;border-radius:8px;padding:10px;font-size:16px;width:200px}ion-content[_ngcontent-%COMP%]   ion-input[type=file][_ngcontent-%COMP%]::part(native){color:#fff}.file-upload-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.file-upload[_ngcontent-%COMP%]{display:inline-block;position:relative;overflow:hidden;margin-bottom:20px}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;opacity:0;cursor:pointer}.upload-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:8px}.file-label[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.file-preview[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.image-preview[_ngcontent-%COMP%]{width:100px;height:100px;overflow:hidden;border-radius:8px;margin-right:16px}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.file-details[_ngcontent-%COMP%]{flex-grow:1}.file-name[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.file-size[_ngcontent-%COMP%]{font-size:14px;color:#777}.file-requirements-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:12px}.file-requirements[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.file-requirements[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;margin-bottom:8px}.submit-button[_ngcontent-%COMP%]{margin-top:20px}.file-upload[_ngcontent-%COMP%]{position:relative;display:inline-block;cursor:pointer}.upload-icon[_ngcontent-%COMP%]{font-size:24px;color:#4caf50}.file-label[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-left:10px}.file-upload[_ngcontent-%COMP%]:hover   .upload-icon[_ngcontent-%COMP%], .file-upload[_ngcontent-%COMP%]:hover   .file-label[_ngcontent-%COMP%]{color:#2e8b57}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}"]})}return r})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1495],{1495:(A,p,l)=>{l.r(p),l.d(p,{DataPage:()=>Z});var h=l(5861),n=l(8606),d=l(95),m=l(6814),t=l(6689),f=l(1725),v=l(9140),C=l(1517),y=l(7911);function T(a,u){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),t._UZ(3,"ion-back-button",3),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Data"),t.qZA()()())}function O(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showContent=!0)}),t._UZ(4,"ion-icon",5),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Data"),t.qZA()()()}}function P(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-content"),t._UZ(1,"br"),t.TgZ(2,"ion-item",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.logCardValue("mtn"),t.KtG(o.showContent=!1)}),t._UZ(3,"ion-img",7),t.TgZ(4,"ion-label",8),t._uU(5," MTN "),t.qZA(),t._UZ(6,"ion-icon",9),t.qZA(),t.TgZ(7,"ion-item",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.logCardValuey("airtel"),t.KtG(o.showContent=!1)}),t._UZ(8,"ion-img",11),t.TgZ(9,"ion-label",8),t._uU(10," Airtel"),t.qZA(),t._UZ(11,"ion-icon",9),t.qZA(),t.TgZ(12,"ion-item",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.logCardValuez("glo"),t.KtG(o.showContent=!1)}),t._UZ(13,"ion-img",13),t.TgZ(14,"ion-label",8),t._uU(15," GLO "),t.qZA(),t._UZ(16,"ion-icon",9),t.qZA(),t.TgZ(17,"ion-item",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.logCardValuea("9mobile"),t.KtG(o.showContent=!1)}),t._UZ(18,"ion-img",15),t.TgZ(19,"ion-label",8),t._uU(20," 9mobile "),t.qZA(),t._UZ(21,"ion-icon",9),t.qZA()()}}function b(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-select-option",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.logCardValued(s.value))}),t._uU(1),t.qZA()}if(2&a){const e=u.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.plan_name," ")}}function S(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",23),t._uU(2,"Phone Number"),t.qZA(),t.TgZ(3,"ion-input",24),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.phone=o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.phone)}}function x(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",23),t._uU(2,"Amount"),t.qZA(),t.TgZ(3,"ion-input",25),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectedOption.veluxprice=o)}),t._uU(4,"\u20a6 "),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("readonly",!0)("ngModel",e.selectedOption.veluxprice)}}function M(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",26),t._uU(2,"PIN"),t.qZA(),t.TgZ(3,"ion-input",27),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.pin=o)}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.pin)}}function D(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"ion-content",16)(1,"ion-list")(2,"ion-item")(3,"ion-label",17),t._uU(4,"Packages"),t.qZA(),t.TgZ(5,"ion-select",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.selectedOption=o)})("ionChange",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onOptionSelected())}),t.YNc(6,b,2,2,"ion-select-option",19),t.qZA()(),t.YNc(7,S,4,1,"ion-item",0),t.YNc(8,x,5,2,"ion-item",0),t.YNc(9,M,4,1,"ion-item",0),t.TgZ(10,"div"),t._UZ(11,"br"),t.TgZ(12,"ion-button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dataX())}),t._UZ(13,"ion-icon",21),t._uU(14,"Top Up"),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.selectedOption),t.xp6(1),t.Q6J("ngForOf",e.plans),t.xp6(1),t.Q6J("ngIf",e.selectedOption),t.xp6(1),t.Q6J("ngIf",e.selectedOption),t.xp6(1),t.Q6J("ngIf",e.selectedOption)}}let Z=(()=>{class a{constructor(e,i,o,s,c,r,_,g,I,E,N,U,w){this.loadingCtrl=e,this.loadingController=i,this.loadingCtl=o,this.formBuilder=s,this.router=c,this.modalCtrl=r,this.modalController=_,this.toastCtrl=g,this.toastController=I,this.storage=E,this.authService=N,this.toastService=U,this.alertController=w,this.formData={phone:"",amount:"",pin:""},this.formDatax={phone:"",amount:""},this.showContent=!0,this.cardValue="",this.serviceIDx="",this.showContent1=!0,this.showContent2=!1,this.isLoading=!1,this.type=!0,this.verified=!1,this.services=[],this.arrayData=[],this.searchTerm="",this.selectedPlan={displayName:"",value:"",price:""},this.variationid="",this.ip=""}presentToast(e,i){var o=this;return(0,h.Z)(function*(){(yield o.toastController.create({message:e,duration:2e3,position:"bottom",color:i})).present()})()}ngOnInit(){}onOptionSelected(){this.selectedOption=this.plans.find(e=>e.plan_name===this.selectedOption.plan_name),console.log(this.selectedOption.plan_name),console.log(this.selectedOption.veluxprice),console.log(this.selectedOption),this.variationid=this.selectedOption.variation_id,this.ip=this.selectedOption.vtuprice}onValueChange(e){this.price=this.plans.find(i=>i.value===this.selectedPlan)?.veluxprice,console.log(this.selectedPlan),console.log(this.price)}updatePrice(){const e=this.plans.find(i=>i.value===this.selectedPlan.value);e&&(this.selectedPlan.price=e.price),console.log("selectedPlan",this.selectedPlan.value)}logCardValue(e){this.cardValue=e,console.log(e),this.getSME()}logCardValuex(e){this.cardValue=e,console.log(e),this.getMtn()}logCardValuey(e){this.cardValue=e,console.log(e),this.getAirtel()}logCardValuea(e){this.cardValue=e,console.log(e),this.getEtisalat()}logCardValuez(e){this.cardValue=e,console.log(e),this.getGlo()}logCardValued(e){this.cardValue=e,console.log(e)}filterItems(){this.filteredOptions=this.plans.filter(e=>e.displayName.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1)}getGlo(){this.authService.glo().subscribe(e=>{if("Signature verification failed"===e.message&&"/auth-screen"!==this.router.url&&"/vtu/data"===this.router.url)localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen");else{this.plans=e;for(const o of e)this.variationid=o.variation_id,this.ip=o.vtuprice,console.log(this.variationid,this.ip);localStorage.setItem("variationid",this.variationid),localStorage.setItem("vtuprice",this.ip);const i=this.plans;this.filteredOptions=this.plans,console.log("Returned Data",e),console.log(e),console.log(JSON.stringify(e)),console.log(JSON.stringify(this.plans)),console.log(i+"are you good?")}},e=>{"/vtu/data"===this.router.url&&(this.toastService.showToast("Could not complete your request try again!"),console.error("Could not complete your request try again!",e))})}getEtisalat(){this.authService.etisalat().subscribe(e=>{if("Signature verification failed"===e.message&&"/auth-screen"!==this.router.url&&"/vtu/data"===this.router.url)localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen");else{this.plans=e,this.variationid=e.variation_id,this.ip=e.vtuprice;for(const o of e)this.variationid=o.variationid,this.ip=o.vtuprice,console.log(this.variationid,this.ip);localStorage.setItem("variationid",this.variationid),localStorage.setItem("initialprice",this.ip),this.filteredOptions=this.plans;const i=this.plans;console.log("Returned Data",e),console.log(JSON.stringify(e)),console.log(JSON.stringify(e)),console.log(JSON.stringify(this.plans)),console.log(i+"are you good?")}},e=>{"/vtu/data"===this.router.url&&(this.toastService.showToast("Could not complete your request try again!"),console.error("Could not complete your request try again!",e))})}getMtn(){this.authService.mtnCorp().subscribe(e=>{if("Signature verification failed"===e.message&&"/auth-screen"!==this.router.url&&"/vtu/data"===this.router.url)localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen");else{this.plans=e;for(const s of e)this.variationid=s.variation_id,this.ip=s.vtuprice,console.log(this.variationid,this.ip);localStorage.setItem("variationid",this.variationid),localStorage.setItem("initialprice",this.ip),this.filteredOptions=this.plans;const i=this.plans;console.log("Returned Data",e),console.log(JSON.stringify(e)),console.log(JSON.stringify(e)),console.log(JSON.stringify(this.plans)),console.log(i+"are you good?")}},e=>{"/vtu/data"===this.router.url&&(this.toastService.showToast("Could not complete your request try again!"),console.error("Could not complete your request try again!",e))})}getAirtel(){this.authService.airtel().subscribe(e=>{if("Signature verification failed"===e.message&&"/auth-screen"!==this.router.url&&"/vtu/data"===this.router.url)localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen");else{this.plans=e,this.variationid=e.variation_id,this.ip=e.vtuprice;for(const o of e)this.variationid=o.variation_id,this.ip=o.vtuprice,console.log(this.variationid,this.ip);localStorage.setItem("variationid",this.variationid),localStorage.setItem("initialprice",this.ip),this.filteredOptions=this.plans;const i=this.plans;console.log("Returned Data",e),console.log(JSON.stringify(e)),console.log(JSON.stringify(e)),console.log(JSON.stringify(this.plans)),console.log(i+"are you good?")}},e=>{"/vtu/data"===this.router.url&&(this.toastService.showToast("Could not complete your request try again!"),console.error("Could not complete your request try again!",e))})}getSME(){this.authService.mtn().subscribe(e=>{if("Signature verification failed"===e.message&&"/auth-screen"!==this.router.url&&"/vtu/data"===this.router.url)localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen");else{this.plans=e,this.variationid=e.variationid,this.ip=e.vtuprice;for(const o of this.plans)this.variationid=o.variation_id,this.ip=o.vtuprice,console.log(this.variationid,this.ip);localStorage.setItem("variationid",this.variationid),localStorage.setItem("initialprice",this.ip),this.filteredOptions=this.plans;const i=this.plans;console.log("Returned Data",e),console.log(JSON.stringify(e)),console.log(JSON.stringify(e)),console.log(JSON.stringify(this.plans)),console.log(i+"are you good?")}},e=>{console.error("Could not complete your request try again!",e),"/vtu/data"===this.router.url&&this.toastService.showToast("Could not complete your request try again!")})}presentDataAlert(e,i,o,s){var c=this;return(0,h.Z)(function*(){let r;switch(e){case"success":r=`You have successfully purchased airtime of ${i} `;break;case"insuficient funds":r=`Transaction amount greater than wallet balance. <br> ${i}`;break;case"transaction failed":r="We could not complete your request at this moment, please try again shortly.";break;default:r="An unknown error occurred."}yield(yield c.alertController.create({header:o,message:r,buttons:[{text:"OK",cssClass:"purple-button",handler:()=>{"failed"!==e&&c.router.navigateByUrl("/tabs")}}],backdropDismiss:!1,cssClass:"custom-alert",animated:!0,mode:"ios"})).present()})()}showLoader(e){return this.isLoading||(this.isLoading=!0),this.loadingCtrl.create({message:e,spinner:"bubbles"}).then(i=>{i.present().then(()=>{this.isLoading||i.dismiss().then(()=>{console.log("abort presenting")})})}).catch(i=>{this.isLoading=!1,console.log(i)})}presentLoading(e,i){var o=this;return(0,h.Z)(function*(){yield(yield o.loadingCtl.create({message:e,spinner:i})).present()})()}hideLoader(){return this.isLoading&&(this.isLoading=!1),this.loadingCtrl.dismiss().then(()=>console.log("dismissed")).catch(e=>console.log(e))}dataX(){var e=this;console.log(this.serviceIDx=this.cardValue+" i am here");const i={network_id:this.cardValue,phone:this.phone,variation_id:this.variationid,initialprice:this.ip,amount:this.selectedOption.veluxprice};if(console.log(this.serviceIDx=this.cardValue+" i am herey"+JSON.stringify({userPin:this.pin})+JSON.stringify(i)),this.presentLoading("Validating...","crescent"),4===this.pin.length){console.log(this.pin);const s={transferPin:this.pin};console.log("I am "+s),this.authService.checkPin(s).subscribe(function(){var c=(0,h.Z)(function*(r){console.log(r),"correct pin"===r?((yield e.toastCtrl.create({message:"Pin is Valid.",duration:3e3,position:"bottom"})).present(),e.loadingCtl.dismiss(),e.hideLoader(),e.modalCtrl.dismiss(r),e.presentLoading("Purchasing Plan...","circular"),e.authService.data(i).subscribe(g=>{console.log(JSON.stringify(g)),console.log(g.message+" is here "),"Signature verification failed"===r.message&&"/auth-screen"!==e.router.url&&"/vtu/data"===e.router.url?(localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),e.toastController.create(),e.presentToast("Session Expired.....Logging out","danger"),e.router.navigateByUrl("/auth-screen")):(console.log("Here Now"),"insuficient funds"===g.message?(e.presentDataAlert("insuficient funds",` \u20a6${i.amount}`,"Transaction Failed"),e.toastController.create(),e.presentToast(g.message+", Please fund your account and try again","danger"),e.loadingCtl.dismiss()):"Data successfully delivered"===g.message?e.presentDataAlert("success",` \u20a6${i.amount}`,"Transaction Successful"):(e.toastController.create(),e.presentToast(g.message,"success"),e.loadingCtl.dismiss()))},g=>{console.error(g),console.log("Error found here"),e.loadingCtl.dismiss()}),e.loadingCtl.dismiss(s)):((yield e.toastCtrl.create({message:"Invalid User Pin. Please try again.",duration:2e3,position:"bottom",color:"danger"})).present(),console.log("Hello Dickson"),e.loadingCtrl.dismiss(),e.hideLoader(),e.modalCtrl.dismiss(s),console.log("I am here"),e.loadingCtrl.dismiss())});return function(r){return c.apply(this,arguments)}}(),function(){var c=(0,h.Z)(function*(r){console.log(r),(yield e.toastCtrl.create({message:"Invalid User Pin. Please try again.",duration:2e3,position:"bottom",color:"danger"})).present(),console.log("Hello Dickson"),e.loadingCtl.dismiss(),e.hideLoader(),e.modalCtrl.dismiss(s),console.log("I am here"),e.loadingCtl.dismiss()});return function(r){return c.apply(this,arguments)}}())}}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(n.HT),t.Y36(n.HT),t.Y36(n.HT),t.Y36(d.qu),t.Y36(f.F0),t.Y36(n.IN),t.Y36(n.IN),t.Y36(n.yF),t.Y36(n.yF),t.Y36(v.yW),t.Y36(C.e),t.Y36(y.k),t.Y36(n.Br))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-data"]],standalone:!0,features:[t.jDz],decls:5,vars:4,consts:[[4,"ngIf"],["class","airt",4,"ngIf"],["slot","start"],["defaultHref","/tabs/wallets"],[3,"click"],["slot","icon-only","name","arrow-back"],["color","tertiary","lines","none","value","MTNSME",1,"bundle-items",3,"click"],["src","assets/images/mtn-logo-img.png","alt","Mtn"],[1,"ion-llabel"],["name","chevron-forward-outline","slot","end"],["color","tertiary","lines","none","value","Airtel",1,"bundle-items",3,"click"],["src","assets/images/airtel-logo-img.png","alt","Mtn"],["color","tertiary","lines","none","value","GLO",1,"bundle-items",3,"click"],["src","assets/images/glo-logo-img.png","alt","Mtn"],["color","tertiary","lines","none","value","9mobile",1,"bundle-items",3,"click"],["src","assets/images/9mobile-logo-img.png","alt","Mtn"],[1,"airt"],["position","stacked","color","medium"],["interface","action-sheet","placeholder","Choose A Package",3,"ngModel","ngModelChange","ionChange"],[3,"value","click",4,"ngFor","ngForOf"],["expand","block","width","50%","color","medium",1,"top-upx",3,"click"],["name","reload-circle-outline"],[3,"value","click"],["position","stacked"],["type","tel","minlength","11","maxlength","11","message","Phone Number must be 11 characters long","name","phone",3,"ngModel","ngModelChange"],["type","number","name","amountx",1,"bold-disabled",3,"readonly","ngModel","ngModelChange"],["position","floating"],["type","password","name","pin",1,"pin-input",3,"ngModel","ngModelChange"]],template:function(i,o){1&i&&(t.TgZ(0,"ion-content"),t.YNc(1,T,6,0,"ion-header",0),t.YNc(2,O,7,0,"ion-header",0),t.YNc(3,P,22,0,"ion-content",0),t.YNc(4,D,15,5,"ion-content",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",o.showContent),t.xp6(1),t.Q6J("ngIf",!o.showContent),t.xp6(1),t.Q6J("ngIf",o.showContent),t.xp6(1),t.Q6J("ngIf",!o.showContent))},dependencies:[m.ez,m.sg,m.O5,d.u5,d.JJ,d.wO,d.nD,d.On,n.Pc,n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Xz,n.pK,n.Ie,n.Q$,n.q_,n.t9,n.n0,n.wd,n.sr,n.as,n.QI,n.j9,n.oU],styles:["ion-toolbar[_ngcontent-%COMP%]{padding-top:1rem!important;padding-inline:1rem}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700}ion-card-header.ios[_ngcontent-%COMP%]{display:flex;flex-flow:column-reverse}ion-card-title[_ngcontent-%COMP%]{--color: #cbff52;align-items:center;justify-content:center;margin:auto;padding:auto}ion-card-content[_ngcontent-%COMP%]{align-items:center;justify-content:center;margin:auto;padding:auto}ion-card-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}ion-select[_ngcontent-%COMP%]{border:none;outline:none;appearance:none}.bold-disabled[_ngcontent-%COMP%]{opacity:1;font-weight:700;color:var(--ion-color-base)}.bundle-items[_ngcontent-%COMP%]{background-color:#1f1f1f;border-radius:.5rem;padding:1rem;font-weight:700;margin-bottom:.5rem;margin-inline:.8rem}.bundle-items[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8rem}.bundle-items[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin-right:.8rem}"]})}return a})()}}]);
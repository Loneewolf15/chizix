"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[226],{226:(U,_,s)=>{s.r(_),s.d(_,{TransactionsPage:()=>A});var m=s(5861),r=s(6814),e=s(8606),u=s(340),d=s(8180),T=s(95),t=s(6689),h=s(1517),p=s(1725),O=s(9140),x=s(7911);function M(o,l){if(1&o&&(t.TgZ(0,"ion-text",17),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ","-\u20a6"+n.amount," ")}}function P(o,l){if(1&o&&(t.TgZ(0,"ion-text",18),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ","\u20a6"+n.amount," ")}}function C(o,l){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",12),t.NdJ("click",function(){const c=t.CHM(n).$implicit,g=t.oxw(2);return t.KtG(g.setOpen(c))}),t.TgZ(2,"ion-thumbnail",13),t._UZ(3,"img",14),t.qZA(),t.TgZ(4,"ion-label")(5,"ion-text"),t._uU(6),t.qZA(),t.TgZ(7,"p")(8,"ion-text"),t._uU(9),t.ALo(10,"date"),t._UZ(11,"br"),t.TgZ(12,"ion-note"),t._uU(13),t.ALo(14,"date"),t.qZA()()()(),t.YNc(15,M,2,1,"ion-text",15),t.YNc(16,P,2,1,"ion-text",16),t.qZA(),t.BQk()}if(2&o){const n=l.$implicit,a=t.oxw(2);t.xp6(3),t.Q6J("src",a.getThumbnailImage(n),t.LSH),t.xp6(3),t.hij(" ",a.getTransactionName(n)," "),t.xp6(3),t.hij(" ",t.xi3(10,6,null==n?null:n.date,"MMM d, y")," "),t.xp6(4),t.Oqu(t.xi3(14,9,null==n?null:n.date,"hh:mm a")),t.xp6(2),t.Q6J("ngIf","out"===a.segmentValue),t.xp6(1),t.Q6J("ngIf","in"===a.segmentValue&&n.sender_tagname!==(null==a.userData?null:a.userData.loginData.user_tag))}}function f(o,l){if(1&o&&(t.TgZ(0,"ion-list",10)(1,"ion-item-group"),t.YNc(2,C,17,12,"ng-container",11),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.transactionx)}}function Z(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"ion-content")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Modal"),t.qZA(),t.TgZ(4,"ion-buttons",18)(5,"ion-button",19),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.closeModal())}),t.TgZ(6,"b")(7,"strong"),t._uU(8,"X"),t.qZA()()()()(),t.TgZ(9,"ion-list")(10,"ion-item")(11,"table")(12,"thead")(13,"tr")(14,"th",20),t._uU(15,"Wallet Transfer"),t.qZA()()(),t.TgZ(16,"tbody")(17,"tr")(18,"td"),t._uU(19,"Date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.ALo(22,"date"),t.qZA()(),t.TgZ(23,"tr")(24,"td"),t._uU(25,"Time"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.ALo(28,"date"),t.qZA()(),t.TgZ(29,"tr")(30,"td"),t._uU(31,"Transaction ID"),t.qZA(),t.TgZ(32,"td"),t._uU(33),t.qZA()(),t.TgZ(34,"tr")(35,"td"),t._uU(36,"Velux Charge"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"\u20a60.00"),t.qZA()(),t.TgZ(39,"tr")(40,"td"),t._uU(41,"Transaction Status"),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA()(),t.TgZ(44,"tr")(45,"td"),t._uU(46,"Amount"),t.qZA(),t.TgZ(47,"td"),t._uU(48),t.qZA()(),t.TgZ(49,"tr")(50,"td"),t._uU(51,"Recipient Name"),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.qZA()(),t.TgZ(54,"tr")(55,"td"),t._uU(56,"Sender Name"),t.qZA(),t.TgZ(57,"td"),t._uU(58),t.qZA()()()()()()()}if(2&o){const n=t.oxw();t.xp6(21),t.Oqu(t.xi3(22,7,null==n.selectedTransaction?null:n.selectedTransaction.date,"dd-MM-yyyy")),t.xp6(6),t.Oqu(t.xi3(28,10,null==n.selectedTransaction?null:n.selectedTransaction.date,"HH:mm:ss")),t.xp6(6),t.Oqu(null==n.selectedTransaction?null:n.selectedTransaction.transaction_id),t.xp6(10),t.Oqu(null==n.selectedTransaction?null:n.selectedTransaction.transaction_status),t.xp6(5),t.hij("\u20a6",null==n.selectedTransaction?null:n.selectedTransaction.amount,""),t.xp6(5),t.Oqu((null==n.selectedTransaction?null:n.selectedTransaction.sender_tagname)===(null==n.userData?null:n.userData.loginData.user_tag)?null==n.selectedTransaction?null:n.selectedTransaction.sender_name:null==n.selectedTransaction?null:n.selectedTransaction.receiver_name),t.xp6(5),t.Oqu((null==n.selectedTransaction?null:n.selectedTransaction.sender_tagname)===(null==n.userData?null:n.userData.loginData.user_tag)?null==n.selectedTransaction?null:n.selectedTransaction.receiver_name:null==n.selectedTransaction?null:n.selectedTransaction.sender_name)}}function b(o,l){1&o&&(t.TgZ(0,"ion-list",10)(1,"ion-item-group")(2,"ion-item",21)(3,"ion-label",22)(4,"ion-text"),t._uU(5,"No Transaction Found!"),t.qZA()()()()())}let A=(()=>{class o{constructor(n,a,i,c,g,D,v){this.authService=n,this.router=a,this.toastController=i,this.storage=c,this.toastService=g,this.datePipe=D,this.modalController=v,this.transactionx=[],this.allTransactions=[],this.allTransactionx=[],this.transactions=[],this.isModalOpen=!1,this.segmentValue="in",this.getTransactions(),this.filterTransactionx()}presentToast(n,a){var i=this;return(0,m.Z)(function*(){(yield i.toastController.create({message:n,duration:2e3,position:"bottom",color:a})).present()})()}fetchUserData(){const n=localStorage.getItem("userData");n&&(this.userData=JSON.parse(n))}getTransactions(){this.authService.getTransactions().subscribe(n=>{"Signature verification failed"===n.message&&"/auth-screen"!==this.router.url?(localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen")):this.transactionx=n,console.log(this.transactionx)})}ngOnInit(){(0,u.F)(2e4).pipe((0,d.q)(1)).subscribe(()=>this.getTransactions()),(0,u.F)(22e3).pipe((0,d.q)(1)).subscribe(()=>this.filterTransactionx()),this.allTransactions=[{id:1,to:"Victor Divine.",date:"2022-05-22",amount:5e3},{id:2,to:"Dickson",date:"2022-03-02",amount:7e3},{id:3,to:"Ighodalo",date:"2022-07-28",amount:-3250},{id:4,to:"Veronica William.",date:"2022-01-09",amount:1e3},{id:5,to:"osaro Godwin.",date:"2022-04-13",amount:-800}],this.getTransactions(),this.filterTransactionx()}filterTransactions(){this.transactions=this.allTransactions.filter("in"==this.segmentValue?n=>n.amount>=0:n=>n.amount<0)}filterTransactionx(){"in"==this.segmentValue?(this.transactionx=this.allTransactionx.filter(n=>n.sender_name!==JSON.parse(localStorage.getItem("userData"))?.loginData.full_name),console.log(this.transactionx)):(this.transactionx=this.allTransactionx.filter(n=>n.sender_name===JSON.parse(localStorage.getItem("userData"))?.loginData.full_name),console.log(this.transactionx),console.log(`I am ${JSON.stringify(this.transactionx)}`))}getThumbnailImage(n){return"in"===this.segmentValue?"assets/imgs/received.png":"assets/imgs/sent.png"}getTransactionName(n){return"in"===this.segmentValue?n.receiver_name===this.userData?.loginData.full_name?n.receiver_name:n.sender_name:n.sender_name===this.userData?.loginData.full_name?n.sender_name:n.receiver_name}segmentChanged(n){console.log(n),this.segmentValue=n.detail.value,this.filterTransactionx()}setOpen(n){this.selectedTransaction=n,this.isModalOpen=!0,console.log("Transaction selected:",n)}closeModal(){this.isModalOpen=!1}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(h.e),t.Y36(p.F0),t.Y36(e.yF),t.Y36(O.yW),t.Y36(x.k),t.Y36(r.uU),t.Y36(e.IN))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-transactions"]],standalone:!0,features:[t._Bn([r.uU]),t.jDz],decls:19,vars:5,consts:[["translucent","",1,"ion-no-border"],["slot","start"],["defaultHref","/tabs"],["color","warning","mode","ios"],["mode","ios",3,"value","ionChange"],["value","in"],["value","out"],["fullscreen",""],["class","transactions",4,"ngIf"],[3,"isOpen","backdropDismiss"],[1,"transactions"],[4,"ngFor","ngForOf"],["lines","full",3,"click"],["slot","start",1,"ion-text-center"],[3,"src"],["slot","end","color","primary",4,"ngIf"],["slot","end",4,"ngIf"],["slot","end","color","primary"],["slot","end"],["color","danger",3,"click"],["colspan","2",1,"table-title"],["lines","full"],[1,"ion-text-center"]],template:function(a,i){1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5,"Transaction History"),t.qZA()(),t.TgZ(6,"ion-toolbar")(7,"ion-segment",4),t.NdJ("ionChange",function(g){return i.segmentChanged(g)}),t.TgZ(8,"ion-segment-button",5)(9,"ion-label"),t._uU(10,"In-flow"),t.qZA()(),t.TgZ(11,"ion-segment-button",6)(12,"ion-label"),t._uU(13,"Out-flow"),t.qZA()()()()(),t.TgZ(14,"ion-content",7),t.YNc(15,f,3,1,"ion-list",8),t.TgZ(16,"ion-modal",9),t.YNc(17,Z,59,13,"ng-template"),t.qZA(),t.YNc(18,b,6,0,"ion-list",8),t.qZA()),2&a&&(t.xp6(7),t.Q6J("value",i.segmentValue),t.xp6(8),t.Q6J("ngIf",(null==i.transactionx?null:i.transactionx.length)>=1),t.xp6(1),t.Q6J("isOpen",i.isModalOpen)("backdropDismiss",!1),t.xp6(2),t.Q6J("ngIf",0==(null==i.transactionx?null:i.transactionx.length)))},dependencies:[r.ez,r.sg,r.O5,r.uU,T.u5,e.Pc,e.YG,e.Sm,e.W2,e.Gu,e.Ie,e.Ub,e.Q$,e.q_,e.uN,e.cJ,e.GO,e.yW,e.Bs,e.wd,e.sr,e.ki,e.QI,e.oU],styles:[".md[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{width:60%;margin:auto}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--color: var(--ion-color-dark);--color-checked: var(--ion-color-primary)}ion-modal[_ngcontent-%COMP%]{--height: 50%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--width: fit-content;--min-width: 90%}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:rgb(209,213,219);opacity:1}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:white;--color: white}table[_ngcontent-%COMP%]{width:100%;table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-bottom:10px;border:1px solid transparent}td[_ngcontent-%COMP%]:first-child{text-align:left;font-size:15px}td[_ngcontent-%COMP%]:last-child{text-align:right;font-size:15px}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{margin-top:1rem}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]{padding-bottom:10vh}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{padding-inline-start:7.5vh}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.1rem}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]{padding:0 4.5vh}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-weight:700;--background: transparent;--border-style: dashed;--border-color: var(--ion-color-tertiary);--padding-bottom: 1rem;--padding-top: 1rem;--padding-start: 0}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-text[slot=end][_ngcontent-%COMP%]{font-size:1rem}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;margin-top:3px}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{height:6vh;width:6vh;border-radius:10px;background:var(--ion-color-white);box-shadow:0 3px 6px #03b5aa0a}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:4vh;width:4vh;transform:translateY(25%)}"]})}return o})()}}]);
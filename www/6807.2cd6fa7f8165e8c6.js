"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6807],{6807:(T,d,i)=>{i.r(d),i.d(d,{SelfiePage:()=>v});var g=i(5861),u=i(4716),_=i(8162),m=i(6814),p=i(95),a=i(8606),t=i(6689),P=i(5472),h=i(9862),M=i(1517),O=i(9140),f=i(1725),C=i(4490);function b(l,D){if(1&l){const e=t.EpF();t.TgZ(0,"ion-content",3)(1,"div",4)(2,"ion-thumbnail",5),t._UZ(3,"ion-img",6),t.qZA(),t.TgZ(4,"ion-button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.startUpload(o.image))}),t._uU(5," Upload Image "),t.qZA(),t.TgZ(6,"ion-button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.takePicture())}),t._UZ(7,"ion-icon",9),t._uU(8," Retake "),t.qZA()()()}if(2&l){const e=t.oxw();t.xp6(3),t.Q6J("src",e.image)}}function E(l,D){if(1&l){const e=t.EpF();t.TgZ(0,"ion-content")(1,"div",4),t._UZ(2,"ion-thumbnail",5),t.TgZ(3,"ion-button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.takePicture())}),t._UZ(4,"ion-icon",11),t._uU(5," Capture Image "),t.qZA()()()}}let v=(()=>{class l{constructor(e,n,o,r,c,s,x,U){this.plt=e,this.http=n,this.loadingCtrl=o,this.toastCtrl=r,this.authService=c,this.storage=s,this.router=x,this.igs=U,this.images=[]}ngOnInit(){return(0,g.Z)(function*(){})()}takePicture(){var e=this;return(0,g.Z)(function*(){try{const n=yield _.V1.getPhoto({quality:90,allowEditing:!1,resultType:_.dk.DataUrl,source:_.oK.Camera});console.log("image",n),e.image=n.dataUrl;const o=e.dataUrltoBlob(n.dataUrl),r="VeluxPay"+(new Date).getTime()+".jpeg",c=new File([o],r,{type:"image/png"});console.log(c),(new FormData).append("selfie",c)}catch{}})()}dataUrltoBlob(e){if(e){let n=e.split(","),o=n[0].match(/:(.*?);/)[1],r=atob(n[1]),c=r.length,s=new Uint8Array(c);for(;c--;)s[c]=r.charCodeAt(c);return new Blob([s],{type:o})}return null}startUpload(e){var n=this;return(0,g.Z)(function*(){try{n.image=e.dataUrl;const o=n.dataUrltoBlob(e.dataUrl),r="VeluxPay"+(new Date).getTime()+".jpeg",c=new File([o],r,{type:"image/png"});let s=new FormData;s.append("selfie",c),n.uploadData(s)}catch(o){console.log(o+" Hello Error")}})()}uploadData(e){var n=this;return(0,g.Z)(function*(){const o=yield n.loadingCtrl.create({message:"Uploading image..."});yield o.present(),n.authService.validate(e).pipe((0,u.x)(()=>{o.dismiss()})).subscribe(r=>{console.log(e+"in sub"),console.log(e+"Divine"),console.log(r),"selfie successfully uploaded"===r.message?(n.igs.setUploadStatus(!0),n.presentToast("Selfie upload complete."),n.router.navigateByUrl("/register/veri")):n.presentToast("Selfie upload failed.")},r=>{console.log(r),n.presentToast("An error occurred during the upload.")})})()}presentToast(e){var n=this;return(0,g.Z)(function*(){(yield n.toastCtrl.create({message:e,duration:3e3})).present()})()}static#t=this.\u0275fac=function(n){return new(n||l)(t.Y36(P.t4),t.Y36(h.eN),t.Y36(a.HT),t.Y36(a.yF),t.Y36(M.e),t.Y36(O.yW),t.Y36(f.F0),t.Y36(C.A))};static#n=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-selfie"]],standalone:!0,features:[t.jDz],decls:8,vars:2,consts:[["defaultHref","/tabs"],["class","ion-padding",4,"ngIf"],[4,"ngIf"],[1,"ion-padding"],[1,"container"],["slot","start",1,"thumbnail"],[3,"src"],["color","medium","expand","block",1,"upLoad",3,"click"],["fill","clear","expand","block",1,"reT",3,"click"],["slot","icon-only","name","trash"],["fill","clear","expand","full",3,"click"],["slot","start","name","camera"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons"),t._UZ(3,"ion-back-button",0),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Selfie"),t.qZA()()(),t.YNc(6,b,9,1,"ion-content",1),t.YNc(7,E,6,0,"ion-content",2)),2&n&&(t.xp6(6),t.Q6J("ngIf",o.image),t.xp6(1),t.Q6J("ngIf",!o.image))},dependencies:[m.ez,m.O5,p.u5,p.UX,a.Pc,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.Xz,a.Bs,a.wd,a.sr,a.oU],styles:["ion-content[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 22px;--background-checked: #7E219E}ion-content[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #7E219E}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:transparent;font-weight:80;font-size:1rem;margin-bottom:1rem;margin-top:.6rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-top:2rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{border-radius:50%;border:1px solid var(--ion-color-tertiary);height:4.5rem;width:4.5rem}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:transparent;font-weight:700;font-size:1.1rem;margin-bottom:1rem;margin-top:.6rem}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:transparent;padding:2rem 1.5rem 1rem}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--border-style: dashed;--border-color: var(--ion-color-tertiary);--padding-bottom: 1rem;--padding-top: 1rem;--padding-start: 0;--padding-end: 0}ion-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{margin-right:-.6rem}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:32vh;margin-right:25%;margin-left:25%;--border-radius: 6px}ion-content[_ngcontent-%COMP%]   .ellipse[_ngcontent-%COMP%]{width:331px;height:528px;left:29px;top:158px;background:fixed;background-color:#c2b0b0;transform:rotate(180deg)}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{box-shadow:none!important;margin-top:25%;margin-left:5%;margin-right:5%}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .upLoad[_ngcontent-%COMP%]{margin-top:8%;height:4vh;font-size:medium}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .reT[_ngcontent-%COMP%]{font-size:15px;margin-bottom:1%}ion-content[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:auto;overflow:hidden;border-radius:50%;width:331px;height:428px;left:360px;top:686px;background:#D9D9D9;transform:rotate(360deg);box-shadow:none}ion-content[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:3vh}"]})}return l})()}}]);
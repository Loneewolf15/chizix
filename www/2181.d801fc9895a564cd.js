"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2181],{7362:(N,m,r)=>{r.r(m),r.d(m,{ReceivesubPage:()=>E});var g=r(5861),a=r(8606),p=r(95),h=r(5432),C=r(2839),_=r(6814),n=r(6689),P=r(5472),O=r(1517),M=r(1725),b=r(9140);function f(i,s){if(1&i&&(n.TgZ(0,"ion-thumbnail",16),n._UZ(1,"img",17),n.qZA()),2&i){const t=n.oxw().$implicit,e=n.oxw(2);n.xp6(1),n.Q6J("src","assets/imgs/"+((null==t?null:t.sender_tagname)===(null==e.userData?null:e.userData.user_tag)?"sent.png":"received.png"),n.LSH)}}function x(i,s){if(1&i&&(n.TgZ(0,"ion-text",18),n._uU(1),n._UZ(2,"br"),n.TgZ(3,"ion-note",19),n._uU(4),n.ALo(5,"date"),n.qZA()()),2&i){const t=n.oxw().$implicit,e=n.oxw(2);n.xp6(1),n.hij(" ","\u20a6"+e.formatAmountWithCommas(t.amount)," "),n.xp6(3),n.Oqu(n.xi3(5,2,null==t?null:t.date,"hh:mm a"))}}function T(i,s){if(1&i){const t=n.EpF();n.ynx(0),n.TgZ(1,"ion-item",13),n.NdJ("click",function(){const c=n.CHM(t).$implicit,d=n.oxw(2);return n.KtG(d.setOpen(c))}),n.YNc(2,f,2,1,"ion-thumbnail",14),n.TgZ(3,"ion-label")(4,"ion-text"),n._uU(5),n.qZA(),n.TgZ(6,"p")(7,"ion-text"),n._uU(8),n.ALo(9,"date"),n.qZA()()(),n.YNc(10,x,6,5,"ion-text",15),n.qZA(),n.BQk()}if(2&i){const t=s.$implicit,e=n.oxw(2);n.xp6(2),n.Q6J("ngIf","inapp"===t.transaction_type),n.xp6(3),n.Oqu(null==t?null:t.sender_name),n.xp6(3),n.hij(" ",n.xi3(9,4,null==t?null:t.date,"MMM d, y")," "),n.xp6(2),n.Q6J("ngIf",t.sender_tagname!==(null==e.userData?null:e.userData.user_tag)&&"inapp"===t.transaction_type)}}function v(i,s){if(1&i&&(n.TgZ(0,"ion-list",10)(1,"ion-list-header")(2,"ion-label",11),n._uU(3,"Recent Transaction"),n.qZA()(),n.TgZ(4,"ion-item-group"),n.YNc(5,T,11,7,"ng-container",12),n.qZA()()),2&i){const t=n.oxw();n.Q6J("inset",!1),n.xp6(5),n.Q6J("ngForOf",t.transactions.slice(0,10))}}function y(i,s){1&i&&(n.ynx(0),n.TgZ(1,"h3"),n._uU(2,"Received "),n.qZA(),n.BQk())}function Z(i,s){if(1&i&&(n.ynx(0),n.TgZ(1,"tr",30)(2,"td"),n._uU(3,"Recipient Name"),n.qZA(),n.TgZ(4,"td"),n._uU(5),n.qZA()(),n.BQk()),2&i){const t=n.oxw(2);n.xp6(5),n.Oqu(t.selectedTransaction.receiver_name)}}function A(i,s){if(1&i&&(n.ynx(0),n.TgZ(1,"tr",30)(2,"td"),n._uU(3,"Sender Name"),n.qZA(),n.TgZ(4,"td"),n._uU(5),n.qZA()(),n.BQk()),2&i){const t=n.oxw(2);n.xp6(5),n.Oqu(t.selectedTransaction.receiver_name)}}function D(i,s){if(1&i){const t=n.EpF();n.TgZ(0,"ion-content")(1,"ion-toolbar")(2,"ion-buttons",20)(3,"ion-button",21),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.closeModal())}),n.TgZ(4,"b")(5,"strong"),n._uU(6,"X"),n.qZA()()()()(),n.TgZ(7,"ion-item",22)(8,"ion-label",23),n._UZ(9,"img",24),n.YNc(10,y,3,0,"ng-container",25),n.qZA()(),n.TgZ(11,"ion-item")(12,"ion-label",26)(13,"p"),n._uU(14,"Total Payment"),n.qZA(),n.TgZ(15,"p",27),n._uU(16),n.qZA()()(),n.TgZ(17,"ion-list",28)(18,"ion-item",29)(19,"table")(20,"tbody")(21,"tr",30)(22,"td"),n._uU(23,"Ref Number"),n.qZA(),n.TgZ(24,"td"),n._uU(25),n.qZA()(),n.TgZ(26,"tr",30)(27,"td"),n._uU(28,"Date and Time"),n.qZA(),n.TgZ(29,"td"),n._uU(30),n.ALo(31,"date"),n.ALo(32,"date"),n.qZA()(),n.YNc(33,Z,6,1,"ng-container",25),n.YNc(34,A,6,1,"ng-container",25),n.qZA()()()(),n.TgZ(35,"ion-item",31)(36,"ion-label"),n._UZ(37,"img",32),n.qZA()()()}if(2&i){const t=n.oxw();n.xp6(10),n.Q6J("ngIf",(null==t.selectedTransaction?null:t.selectedTransaction.sender_tagname)!==(null==t.userData?null:t.userData.user_tag)&&"inapp"===(null==t.selectedTransaction?null:t.selectedTransaction.transaction_type)),n.xp6(6),n.hij("\u20a6",t.formatAmountWithCommas(t.selectedTransaction.amount),""),n.xp6(9),n.AsE("",null==t.selectedTransaction?null:t.selectedTransaction.transaction_id," ",null==t.selectedTransaction?null:t.selectedTransaction.tr_id," "),n.xp6(5),n.AsE("",n.xi3(31,8,null==t.selectedTransaction?null:t.selectedTransaction.date,"dd-MM-yyyy")," ",n.xi3(32,11,null==t.selectedTransaction?null:t.selectedTransaction.date,"HH:mm:ss"),""),n.xp6(3),n.Q6J("ngIf",(null==t.selectedTransaction?null:t.selectedTransaction.sender_tagname)===(null==t.userData?null:t.userData.loginData.user_tag)&&"inapp"===t.selectedTransaction.transaction_type),n.xp6(1),n.Q6J("ngIf",(null==t.selectedTransaction?null:t.selectedTransaction.sender_tagname)!==(null==t.userData?null:t.userData.user_tag)&&"inapp"===(null==t.selectedTransaction?null:t.selectedTransaction.transaction_type))}}function U(i,s){1&i&&(n.TgZ(0,"ion-list",33)(1,"ion-list-header")(2,"ion-label",11),n._uU(3,"Recent Transaction"),n.qZA()(),n.TgZ(4,"ion-item-group")(5,"ion-item",34)(6,"ion-label",35)(7,"ion-text"),n._uU(8,"No Transaction Found!"),n.qZA()()()()())}let E=(()=>{class i{constructor(t,e,o,c,d,w,q,R){var k=this;this.navCtrl=t,this.authService=e,this.router=o,this.modalController=c,this.toastController=d,this.storage=w,this.animationCtrl=q,this.actionSheetCtrl=R,this.accounts=[],this.features=[],this.transactions=[],this.qrCodeString="This is a secret qr code message",this.text="",this.isModalOpen=!1,this.canDismiss=(0,g.Z)(function*(){const l=yield k.actionSheetCtrl.create({header:"Are you sure you want to Log out?",buttons:[{text:"Yes",role:"confirm"},{text:"No",role:"cancel"}]});l.present();const{role:u}=yield l.onWillDismiss();return"confirm"===u}),this.enterAnimation=l=>{const u=l.shadowRoot,S=this.animationCtrl.create().addElement(u.querySelector("ion-backdrop")).fromTo("opacity","0","var(--backdrop-opacity)"),I=this.animationCtrl.create().addElement(u.querySelector(".modal-wrapper")).keyframes([{offset:0,opacity:"0",transform:"scale(0)"},{offset:1,opacity:"1.0",transform:"scale(1)"}]);return this.animationCtrl.create().addElement(l).easing("ease-out").duration(500).addAnimation([S,I])},this.leaveAnimation=l=>this.enterAnimation(l).direction("reverse"),this.fetchQRCodeData(this.qrCodeData)}setOpen(t){this.selectedTransaction=t,this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}fetchQRCodeData(t){this.authService.getSubQrCode().subscribe(e=>{"Signature verification failed"===e.message&&"/auth-screen"!==this.router.url?(localStorage.removeItem("subUserData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen")):(console.log(e),this.qrCodeUrl=e,C.toDataURL(JSON.stringify(this.qrCodeUrl),{errorCorrectionLevel:"M"},(o,c)=>{o?console.error("Error generating QR code:",o):(this.qrCodeDataUrl=c,console.log(this.qrCodeDataUrl))}))},e=>{console.error(e),console.log("Error Generating QrCode, Check your internet connection and try again or Proceed to use the tag namery!")})}ngOnInit(){const t=localStorage.getItem("subUserData");t&&(this.userData=JSON.parse(t)),this.getTransactions()}formatAmountWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}logout(){var t=this;return(0,g.Z)(function*(){const e=yield t.actionSheetCtrl.create({header:"Are you sure you want to Log out?",buttons:[{text:"Yes",handler:()=>{t.authService.logout()}},{text:"No",role:"cancel"}]});yield e.present();const{role:o}=yield e.onWillDismiss();return"confirm"===o})()}openModal(t){var e=this;return(0,g.Z)(function*(){e.selectedTransaction=t,(yield e.modalController.create({component:"ion-modal",cssClass:"transaction-details-modal"})).present()})()}dismissModal(){this.modalController.dismiss()}logoutx(){this.authService.logout()}writeToClipboard(t){var e=this;return(0,g.Z)(function*(){try{yield h.T.write({string:t}),console.log("Text copied to clipboard"),(yield e.toastController.create({message:"Tagname Copied to clipboard "+t,duration:2e3})).present()}catch(o){console.error("Error copying text to clipboard: ",o),(yield e.toastController.create({message:"Could not copy Tagname to clipboard",duration:2e3})).present()}})()}presentToast(t,e){var o=this;return(0,g.Z)(function*(){(yield o.toastController.create({message:t,duration:2e3,position:"bottom",color:e})).present()})()}getTransactions(){this.authService.getSubTransactions().subscribe(t=>{"Signature verification failed"===t.message&&"/auth-screen"!==this.router.url?(localStorage.removeItem("userData"),localStorage.removeItem("res"),localStorage.removeItem("accessT"),this.toastController.create(),this.presentToast("Session Expired.....Logging out","danger"),this.router.navigateByUrl("/auth-screen")):this.transactions=t,console.log(this.transactions)})}static#n=this.\u0275fac=function(e){return new(e||i)(n.Y36(P.SH),n.Y36(O.e),n.Y36(M.F0),n.Y36(a.IN),n.Y36(a.yF),n.Y36(b.yW),n.Y36(a.vB),n.Y36(a.BX))};static#t=this.\u0275cmp=n.Xpm({type:i,selectors:[["app-receivesub"]],standalone:!0,features:[n.jDz],decls:15,vars:8,consts:[[1,"ion-text-center","ion-margin"],[3,"click"],["defaultHref",""],["size","2288","alt","QR code",1,"qrCode",3,"src"],["width","70px","color","light-tint",1,"ion-margin",3,"click"],["name","copy","slot","end"],[1,"transaction-wrapper"],["class","transactions",3,"inset",4,"ngIf"],[3,"isOpen","backdropDismiss","enterAnimation","leaveAnimation"],["class","transactions",4,"ngIf"],[1,"transactions",3,"inset"],["color","secondary"],[4,"ngFor","ngForOf"],["lines","full","lines","none",3,"click"],["slot","start","class","ion-text-center",4,"ngIf"],["class","transaction-text amount-text-right","slot","end","color","success",4,"ngIf"],["slot","start",1,"ion-text-center"],[3,"src"],["slot","end","color","success",1,"transaction-text","amount-text-right"],["color","light"],["slot","end"],["color","danger",1,"close-btn",3,"click"],["lines","'none",1,"ion-receipt-header"],[1,"receipt-header"],["src","assets/images/pay_success.png","alt","Transaction receipt"],[4,"ngIf"],[1,"payment"],[1,"payment-amount"],[1,"payment-table"],["lines","none"],[1,"transac-details"],[1,"sm-velux-logo"],["src","assets/images/sm-velux-logo.png","alt","VeluxPay logo"],[1,"transactions"],["lines","full"],[1,"ion-text-center"]],template:function(e,o){1&e&&(n.TgZ(0,"ion-content")(1,"ion-card",0)(2,"ion-card-header")(3,"ion-buttons",1),n.NdJ("click",function(){return o.logout()}),n._UZ(4,"ion-back-button",2),n.qZA()(),n.TgZ(5,"ion-card-content"),n._UZ(6,"img",3),n.TgZ(7,"ion-button",4),n.NdJ("click",function(){return o.writeToClipboard(null==o.userData?null:o.userData.loginData.user_tag)}),n._uU(8),n._UZ(9,"ion-icon",5),n.qZA()()(),n.TgZ(10,"ion-content",6),n.YNc(11,v,6,2,"ion-list",7),n.TgZ(12,"ion-modal",8),n.YNc(13,D,38,14,"ng-template"),n.qZA(),n.YNc(14,U,9,0,"ion-list",9),n.qZA()()),2&e&&(n.xp6(6),n.Q6J("src",o.qrCodeDataUrl,n.LSH),n.xp6(2),n.hij(" @",null==o.userData?null:o.userData.user_tag," "),n.xp6(3),n.Q6J("ngIf",(null==o.transactions?null:o.transactions.length)>=1),n.xp6(1),n.Q6J("isOpen",o.isModalOpen)("backdropDismiss",!0)("enterAnimation",o.enterAnimation)("leaveAnimation",o.leaveAnimation),n.xp6(2),n.Q6J("ngIf",0==(null==o.transactions?null:o.transactions.length)))},dependencies:[_.ez,_.sg,_.O5,_.uU,p.u5,a.Pc,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.W2,a.gu,a.Ie,a.Ub,a.Q$,a.q_,a.yh,a.uN,a.yW,a.Bs,a.sr,a.ki,a.oU],styles:['ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{max-width:40vh}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1rem}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1.3rem!important}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem;border:1px solid var(--ion-color-tertiary)}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.loadbg[_ngcontent-%COMP%]{background-color:#000}.backbutton[_ngcontent-%COMP%]{margin-left:-2.5rem}ion-modal[_ngcontent-%COMP%]{--height: 60%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--width: fit-content;--min-width: 90%}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:rgb(209,213,219);opacity:1}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:white;--color: white}table[_ngcontent-%COMP%]{width:100%;table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-bottom:10px;border:1px solid transparent}td[_ngcontent-%COMP%]:first-child{text-align:left;font-size:15px}td[_ngcontent-%COMP%]:last-child{text-align:right;font-size:15px}ion-content[_ngcontent-%COMP%]   ion-menu-button[_ngcontent-%COMP%]{margin-left:90%}ion-content[_ngcontent-%COMP%]   ion-menu[_ngcontent-%COMP%]::part(backdrop){background-color:#ff00ff80}ion-content[_ngcontent-%COMP%]   ion-menu[_ngcontent-%COMP%]::part(container){box-shadow:4px 0 16px #ff00ff2e}ion-content[_ngcontent-%COMP%]   ion-datetime-button[_ngcontent-%COMP%]{--ion-background-color:transparent;box-shadow:none!important}ion-content[_ngcontent-%COMP%]   ion-row.banners[_ngcontent-%COMP%]{position:relative;padding:.5rem;height:auto;margin:6vh 1rem 0 1rem}ion-content[_ngcontent-%COMP%]   ion-row.banners[_ngcontent-%COMP%]   swiper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p.acc-amt[_ngcontent-%COMP%]{margin:1rem 0;font-size:2.2rem;font-weight:700}ion-content[_ngcontent-%COMP%]   img.qr-code[_ngcontent-%COMP%]{max-width:300px;max-height:300px}ion-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}ion-content[_ngcontent-%COMP%]   img.qrCode[_ngcontent-%COMP%]{position:center;max-width:50%;max-height:15%}ion-content[_ngcontent-%COMP%]   img.qr-code[_ngcontent-%COMP%]{border:2px solid black}ion-content[_ngcontent-%COMP%]   img.qr-code[_ngcontent-%COMP%]{background-color:#f2f2f2}ion-content[_ngcontent-%COMP%]   img.qr-code[_ngcontent-%COMP%]{display:block;margin:0 auto}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;color:var(--ion-color-base);transform:translateZ(0);transition:box-shadow .3s,transform .3s}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003;transform:translate3d(0,-2px,0);color:var(--ion-color-base)}ion-content[_ngcontent-%COMP%]   ion-row.banners[_ngcontent-%COMP%]:after{content:"";position:justify;background:#7E219E;border:2px solid transparent}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{padding-inline-start:3.5vh}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.1rem}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]{padding:0 3.5vh}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-weight:700;--background: transparent;--border-style: dashed;--border-color: var(--ion-color-tertiary);--padding-bottom: 1rem;--padding-top: 1rem;--padding-start: 0}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-text[slot=end][_ngcontent-%COMP%]{font-size:1rem}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;margin-top:3px}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{height:6vh;width:6vh;border-radius:10px;background:var(--ion-color-white);box-shadow:0 3px 6px #03b5aa0a}ion-content[_ngcontent-%COMP%]   ion-list.transactions[_ngcontent-%COMP%]   ion-item-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:4vh;width:4vh;transform:translateY(25%)}.close-btn[_ngcontent-%COMP%]{font-size:1.6rem;padding-top:1rem}.receipt-header[_ngcontent-%COMP%]{text-align:center}.ion-receipt-header[_ngcontent-%COMP%]{padding-bottom:1rem}.ion-receipt-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:1.3rem}.payment-table[_ngcontent-%COMP%]{padding-block:1.2rem}.payment[_ngcontent-%COMP%]{text-align:center;padding-top:1rem}.payment[_ngcontent-%COMP%]   .payment-amount[_ngcontent-%COMP%]{font-weight:700;font-size:2rem}.transac-details[_ngcontent-%COMP%]{font-weight:700;padding-block:10rem}.transac-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.8rem}.sm-velux-logo[_ngcontent-%COMP%]{margin-top:1.2rem;margin-bottom:.7rem}.sm-velux-logo[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center}.transaction-text[_ngcontent-%COMP%]{font-size:.8rem!important}.transaction-time[_ngcontent-%COMP%]{font-size:.65rem!important}.amount-text-right[_ngcontent-%COMP%]{text-align:right}']})}return i})()}}]);